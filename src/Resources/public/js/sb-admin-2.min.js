/*!
 * Start Bootstrap - SB Admin 2 v4.0.4 (https://startbootstrap.com/template-overviews/sb-admin-2)
 * Copyright 2013-2020 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

"use strict";$(document).ready(function(){function createFormErrorMessage(e){return'<div class="alert alert-danger alert-dismissible fade show" role="alert">        <i class="fas fa-info-circle"></i>        <span class="small text-muted">'+e+'</span>        <button type="button" class="close" data-dismiss="alert" aria-label="Close">            <span aria-hidden="true">×</span>        </button>    </div>'}function fieldUploadFile(i){$(i).next(".custom-file-label").html(i.files[0].name);var e=new FormData;e.append("file",i.files[0]),e.append("field_alias",$(i).data("field-alias")),$.ajax({url:Routing.generate("teebb_file_upload"),type:"POST",data:e,contentType:!1,processData:!1,dataType:"json"}).done(function(e){$(i).closest("div.custom-file").addClass("d-none"),$(i).attr("disabled","disabled");var t=$(i).closest("fieldset.form-group"),a=t.find(".file-other-info-wrapper");a.find("div.file-show").removeClass("d-none"),a.find("a.file").attr("href",e.url),a.find("a.file").append(e.file.originFileName),a.find("img.file").attr("src",e.hasOwnProperty("thumbnailUrl")?e.thumbnailUrl:e.url),a.find("img.file").attr("alt",e.file.originFileName),a.find("button.btn-file-delete").attr("data-file-id",e.file.id),t.find("input.target-file-id-input").val(e.file.id)}).fail(function(e){$(i).closest("div.file-upload-file-wrapper").prepend(createFormErrorMessage(e.responseJSON.detail))})}function fieldFileDelete(l){var e=new FormData;e.append("id",$(l).data("file-id")),$.ajax({url:Routing.generate("teebb_file_delete"),type:"POST",data:e,contentType:!1,processData:!1,dataType:"json"}).done(function(e){var t=$(l).closest("div.prototype-wrapper"),a=t.data("prototype"),i=$(l).closest("div.file-upload-wrapper").parent("fieldset"),n=i.index(),o=a.replace(/__name__/g,n);t.insertAt(n,o),i.remove()}).fail(function(e){$(l).closest("fieldset").prepend(createFormErrorMessage(e.responseJSON.detail))})}function getQueryString(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),a=window.location.search.substr(1).match(t);return null!=a?decodeURIComponent(a[2]):null}function replaceUrlParamVal(url,paramName,replaceWith){var re=eval("/("+paramName+"=)([^&]*)/gi");return url.replace(re,paramName+"="+replaceWith)}function setSelectChecked(e,t){for(var a=$(e),i=0;i<a.options.length;i++)if(a.options[i].innerHTML===t){a.options[i].selected=!0;break}}$.fn.insertAt=function(e,t){var a=this.children().length;return e<0&&(e=Math.max(0,a+1+e)),this.append(t),e<a&&this.children().eq(e).before(this.children().last()),this},$("#sidebarToggle, #sidebarToggleTop").on("click",function(e){$("body").toggleClass("sidebar-toggled");var t=$(".sidebar");t.toggleClass("toggled"),t.hasClass("toggled")&&$(".sidebar .collapse").collapse("hide")}),$(window).resize(function(){$(window).width()<768&&$(".sidebar .collapse").collapse("hide")}),$("body.fixed-nav .sidebar").on("mousewheel DOMMouseScroll wheel",function(e){var t,a;768<$(window).width()&&(a=(t=e.originalEvent).wheelDelta||-t.detail,this.scrollTop+=30*(a<0?1:-1),e.preventDefault())}),$(document).on("scroll",function(){100<$(this).scrollTop()?$(".scroll-to-top").fadeIn():$(".scroll-to-top").fadeOut()}),$(document).on("click","a.scroll-to-top",function(e){var t=$(this);$("html, body").stop().animate({scrollTop:$(t.attr("href")).offset().top},1e3,"easeInOutExpo"),e.preventDefault()}),$(document).on("click",".card table thead input[type=checkbox].check-all",function(e){var t=$(this).closest("table").find("tbody tr td input[type=checkbox]");$.each(t,function(e,t){$(t).prop("checked",!$(t).prop("checked"))})}),$(document).on("input","input[type=text].transliterate",function(e){var t=$(this).val(),a=$(this).closest("form"),i=slugify(t).replace(/-/gi,"_");a.find("span.text-alias").text(i),a.find("input.input-alias").val(i),a.find("a.js-modify-alias").removeClass("d-none")}),$(document).on("click","a.js-modify-alias",function(e){e.preventDefault(),e.stopPropagation();var t=$(this).closest("form");t.find("div.text-alias-wrapper").addClass("d-none"),t.find("div.input-alias-wrapper").removeClass("d-none"),t.find("input[type=hidden].input-alias").attr("type","text")}),$(document).on("change","div.select-field-form select",function(e){$(this).closest("div.form-row").closest("div.select-field-form").find("div.field-info").removeClass("d-none")}),$(document).on("change","select#select_field_limit",function(e){var t=$(this).closest("div.select-field-limit"),a=t.find("input[type=number].input-field-limit"),i=t.find("div#select_field_limit_input_wrapper");"0"===$(this).val()&&(a.attr("value","0"),a.addClass("d-none"),i.toggleClass("d-none")),"limit"===$(this).val()&&(a.attr("value","1"),a.removeClass("d-none"),i.toggleClass("d-none"))}),$(document).on("input","input[type=text].input-allow-extension-name",function(e){var t=$(this).val().replace(/[，| |\-|_|\－]/,",");$(this).val(t)}),$(document).on("click","a.js-sortable",function(e){e.preventDefault(),e.stopPropagation()}),$(document).ready(function(){$(".bootstrap-select .bs-searchbox input").addClass("form-control-sm")}),$('.js-add-menu-item a[data-toggle="tab"]').on("shown.bs.tab",function(e){var t=$(e.target),a=$(e.relatedTarget);t.addClass("bg-gray-100 border-bottom-gray-100"),a.removeClass("bg-gray-100 border-bottom-gray-100")}),$(".dd-item .accordion-arrow").on("click",function(e){$(e.target).closest(".dd-item").find(".collapse").collapse("toggle")}),$("td.js-comment-td").hover(function(e){$(e.target).find(".comment-option").css("left","0px")},function(e){$(e.target).find(".comment-option").css("left","-9999em")}),$("button#edit_comment_time_btn").on("click",function(e){$(e.target).closest(".comment-time").find("input#comment_time").removeAttr("disabled"),$(e.target).hide()}),$("button.form-field-add-item").on("click",function(e){var t=$(this).parent(".form-group").find("div.prototype-wrapper"),a=t.data("prototype"),i=t.children().length,n=a.replace(/__name__/g,i);t.append(n),console.log(a,i)}),$("a.toggle-show-summary").on("click",function(e){var t=$(this).attr("aria-expanded");console.log(t,"true"===t,"false"===t);var a=$(this).data("show-text"),i=$(this).data("hide-text"),n=$(this).find("span.font-italic");"true"!==t&&!t||n.text(a),"false"!==t&&t||n.text(i)}),$("select.page-limit-select").on("change",function(e){var t,a=$(this).data("path"),i="";i=null!==getQueryString("limit")?replaceUrlParamVal(a,"limit",$(this).val()):(t=-1===a.indexOf("?")?"?":"&",a+t+"limit="+$(this).val()),window.location=i}),$(".prototype-wrapper").on("focus",".js-reference-entity-autocomplete",function(){var a,e;"1"!=$(this).data("autocomplete")&&(a=$(this).data("autocomplete-url"),e=$(this).data("find-label"),$(this).autocomplete({hint:!1},[{source:function(e,t){$.ajax({url:a+"?query="+e}).then(function(e){t(e)})},displayKey:e,debounce:500}]),$(this).data("autocomplete","1"))})});